#! /usr/bin/python2
import subprocess
proc = subprocess.Popen(['conky'], stdout=subprocess.PIPE)
line="start"
while line != '':
    line = proc.stdout
    line = line.readline()
    line= line.rstrip()
    line = line.split(" | ")
    ethernet = line[0]
    wifi = line[1]
    cpu = line[2]
    mem = line[3]
    root = line[4]
    home = line[5]
    share = line[6]
    connected = line[7]
    if connected == "on-line":
        connected = "charge"
    else:
        connected = "discharge"
    battery = line[8]
    time = int(line[9])
    if time / 3600.0 >= 1:
        times = str(time/3600)+":"
    time = time%3600
    times += str(time/60)+":"
    time = time%60
    times += str(time)
    ip = "E %s"%(ethernet)
    if ethernet == "No Address":
        ip = "W %s"%(wifi)
    text = "%s | cpu %s | mem %s | / %s | /home %s | /share %s | %s %s %s"%(ip, cpu, mem, root, home, share, connected, battery, times)
    print(text)
